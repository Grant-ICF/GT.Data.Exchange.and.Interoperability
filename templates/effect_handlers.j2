"""
Generated Mock Effect Handlers

Auto-generated from YAML-LD specification.
DO NOT EDIT - This file is generated by hmis-codegen.

These mock handlers can be used in unit tests to simulate effect execution
without requiring actual database connections, API calls, etc.
"""

from typing import Any, Dict, List
from dataclasses import dataclass, field


# ============= Mock Handler Base Class =============

@dataclass
class MockHandler:
    """Base class for mock effect handlers"""
    calls: List[Dict[str, Any]] = field(default_factory=list)
    
    def record_call(self, **kwargs):
        """Record a handler call for testing"""
        self.calls.append(kwargs)
    
    def reset(self):
        """Reset call history"""
        self.calls.clear()


# ============= Mock Effect Handlers =============

{% for handler in handlers %}
@dataclass
class Mock{{ handler.name }}Handler(MockHandler):
    """
    Mock handler for {{ handler.effect_type }} effect
    
    Usage:
        handler = Mock{{ handler.name }}Handler()
        result = handler.handle(...)
        
        # Verify calls
        assert len(handler.calls) == 1
        assert handler.calls[0]['some_param'] == expected_value
    """
    # Default return value
    default_result: Any = None
    
    def handle(self, {% for param in handler.signature.params %}{{ param.split(':')[0].strip() }}: Any{% if not loop.last %}, {% endif %}{% endfor %}) -> Any:
        """Execute mock {{ handler.effect_type }} effect"""
        self.record_call(
            {% for param in handler.signature.params %}
            {{ param.split(':')[0].strip() }}={{ param.split(':')[0].strip() }}{% if not loop.last %},{% endif %}
            {% endfor %}
        )
        return self.default_result

{% endfor %}

# ============= Mock Handler Factory =============

class MockHandlerFactory:
    """Factory for creating mock handlers"""
    
    @staticmethod
    def create_all() -> Dict[str, MockHandler]:
        """Create all mock handlers"""
        return {
            {% for handler in handlers %}
            "{{ handler.effect_type }}": Mock{{ handler.name }}Handler(),
            {% endfor %}
        }
    
    @staticmethod
    def create(effect_name: str) -> MockHandler:
        """Create a specific mock handler"""
        handlers = MockHandlerFactory.create_all()
        if effect_name not in handlers:
            raise ValueError(f"Unknown effect: {effect_name}")
        return handlers[effect_name]


# ============= Test Utilities =============

def setup_mock_handlers() -> Dict[str, MockHandler]:
    """
    Setup mock handlers for testing
    
    Returns:
        Dictionary of effect name -> mock handler
    
    Example:
        handlers = setup_mock_handlers()
        handlers['ConsentCheck'].default_result = ConsentStatus.GRANTED
        
        # Run your test code...
        
        # Verify effects were called
        assert len(handlers['ConsentCheck'].calls) > 0
    """
    return MockHandlerFactory.create_all()


def reset_all_handlers(handlers: Dict[str, MockHandler]) -> None:
    """Reset call history for all handlers"""
    for handler in handlers.values():
        handler.reset()